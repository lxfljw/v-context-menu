(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["v-context"]=t():e["v-context"]=t()})("undefined"!==typeof self?self:this,(function(){return function(){"use strict";var e={};!function(){e.d=function(t,n){for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})}}(),function(){e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){e.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){e.p=""}();var t={};if(e.r(t),e.d(t,{default:function(){return m}}),"undefined"!==typeof window){var n=window.document.currentScript,i=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(e.p=i[1])}var o=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{display:"block"},style:e.style,on:{mousedown:function(e){e.stopPropagation()},contextmenu:function(e){e.preventDefault()}}},[e._t("default",(function(){return[t("section",e._l(e.menu,(function(n,i){return t("a",{key:i,class:{disabled:n.disabled},attrs:{href:"javascript:;"},on:{click:function(t){return e.handlerEvent(n.event)}}},[e._v(e._s(n.name))])})),0)]}))],2)},r=[],s={name:"vue-context-menu",data(){return{triggerShowFn:()=>{},triggerHideFn:()=>{},x:null,y:null,style:{},binded:!1,selectNode:{}}},props:{target:null,show:Boolean,menu:{type:Array,default:()=>[]},menuName:{type:String,default:"menu"}},created(){this.$$parent={},this.parentVm(this)},mounted(){this.bindEvents(),this.$nextTick((()=>{this.$el.classList.add("right-menu")}))},watch:{show(e){e?this.bindHideEvents():(this.unbindHideEvents(),this.selectNode={})},target(){this.bindEvents()}},methods:{parentVm(e){try{"[object Array]"===Object.prototype.toString.call(e.$parent[this.menuName])?this.$$parent=e.$parent:this.parentVm(e.$parent)}catch(t){throw new Error("---找不到该组件具备的菜单项,若您的菜单项命名不是menu,请传入菜单项别名menuName,请have a try---")}},bindEvents(){this.$nextTick((()=>{this.target&&!this.binded&&(this.triggerShowFn=this.contextMenuHandler.bind(this),this.target.addEventListener("contextmenu",this.triggerShowFn),this.binded=!0)}))},unbindEvents(){this.target&&this.target.removeEventListener("contextmenu",this.triggerShowFn)},bindHideEvents(){this.triggerHideFn=this.clickDocumentHandler.bind(this),document.addEventListener("mousedown",this.triggerHideFn),document.addEventListener("mousewheel",this.triggerHideFn)},unbindHideEvents(){document.removeEventListener("mousedown",this.triggerHideFn),document.removeEventListener("mousewheel",this.triggerHideFn)},clickDocumentHandler(){this.$emit("update:show",!1)},contextMenuHandler(e,t){this.$nextTick((()=>{const n=this.$$parent.$el.clientHeight,i=28*this.menu.length,o=n-e.clientY>i;this.x=e.clientX,this.y=o?e.clientY:e.clientY-i,this.layout(),this.$emit("update:show",!0),this.selectNode=t,e.preventDefault()}))},layout(){this.style={left:this.x+"px",top:this.y+"px"}},handlerEvent(e){if("function"!==typeof this.$$parent[e])throw new Error(`~~~找不到该组件的${e}方法~~~`);this.$$parent[e](this.selectNode)}},beforeDestroy(){this.$el.classList.remove("right-menu")}},a=s;function d(e,t,n,i,o,r,s,a){var d,u="function"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),r&&(u._scopeId="data-v-"+r),s?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},u._ssrRegister=d):o&&(d=a?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),d)if(u.functional){u._injectStyles=d;var c=u.render;u.render=function(e,t){return d.call(t),c(e,t)}}else{var l=u.beforeCreate;u.beforeCreate=l?[].concat(l,d):[d]}return{exports:e,options:u}}var u=d(a,o,r,!1,null,"2c894aba",null),c=u.exports;c.install=e=>{e.component(c.name,c)};var l=c;const h=[l],p=e=>{p.installed||h.map((t=>e.component(t.name,t)))};"undefined"!==typeof window&&window.vue&&p(window.Vue);var f={install:p,ContextMenu:l},m=f;return t}()}));
//# sourceMappingURL=v-context.umd.min.js.map